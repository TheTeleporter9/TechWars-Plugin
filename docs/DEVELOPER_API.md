# TechWars Developer API Documentation

## Overview
The TechWars Developer API provides tools and interfaces for server administrators and developers to manage and modify plugin functionality in-game.

## Configuration
Developers are specified in the config.yml file:
```yaml
Developers:
    - developer1
    - developer2
```
Only listed players will have access to developer tools.

## Research Tree System

### Configuration Structure
The research tree is configured in `config.yml`:
```yaml
ResearchTree:
  stages:
    1:
      name: "Stage Name"
      description: "Stage Description"
      requirements:
        - item: MATERIAL_NAME
          amount: NUMBER
      unlocks:
        recipes:
          - RECIPE_NAME
        permissions:
          - "permission.node"
```

### Team Progress Storage
Team progress is stored locally per team in the `teamData.json` file and includes:
- Unlocked stages
- Current research stage
- Research points

### Developer Tools

#### Research Tree Management
Access via `/dev` menu or direct commands like `/researchadmin`:

1.  **Stage Management (via `/researchadmin` command or Dev Menu)**
    -   Force unlock specific stages for a team.
    -   Reset a team's entire research progress.
    -   Copy research progress from one team to another.
    -   Test current stage requirements (for debugging).

2.  **Research Tree View (via `/researchtree` command or Dev Menu)**
    -   View a team's current research progress.
    -   Interact with the current research stage to submit resources for unlock.

## Developer Menu
Access the developer menu using the `/dev` command. The menu provides access to various administrative and testing functionalities:
-   Server Data: View server performance and statistics.
-   Plugin Data: View plugin-specific information and configuration.
-   Team Management: Manage teams, their members, and general team settings.
-   Player Management: Manage individual player data, inventory, and team assignments.
-   Research Management: Directly manage and test team research progress.

### Adding New Developer Features
To add new features to the developer menu:

1.  Create a new menu class extending `BaseMenu`.
2.  Implement the `onSetItems()` method to define the menu's visual layout and items.
3.  Implement the `click(Player player, int slot)` method to handle player interactions with the menu items.
4.  Add a button to the main `DeveloperMenu` class (`src/main/java/org/solocode/techwars/dev/DeveloperMenu.java`) that opens your new menu.

### Creating Custom Data Managers
To add custom data management for teams, utilize the `Team` class's data storage:

1.  Define your custom data structure (e.g., a simple class with fields).
2.  Use `team.setData("yourKey", yourCustomObject)` to store the data.
3.  Retrieve data with `YourCustomClass data = team.getData("yourKey")`.
4.  Create a menu (extending `BaseMenu`) to visualize and modify this data.

## Best Practices
1.  Always validate developer permissions using `DeveloperAPI.isDeveloper()` before granting access to sensitive tools.
2.  Use clear and descriptive titles and lore for menu items to enhance usability.
3.  Implement confirmation steps for any destructive actions (e.g., resetting progress, kicking players).
4.  Maintain organized and well-documented data structures, especially those stored in team data.
5.  Utilize team-specific data storage (`Team.setData`/`getData`) for features that need to track progress or settings per team.
6.  Provide clear feedback to users (e.g., success messages, error messages) for their actions.
7.  Leverage the provided `createItem` helper method in `BaseMenu` for consistent item creation.

## Example: Managing Team Research Data
The `TeamResearchData` class (`src/main/java/org/solocode/techwars/TechTree/TeamResearchData.java`) is an example of how team-specific research progress is managed:

```java
// Load team-specific research data
TeamResearchData researchData = new TeamResearchData(team);

// Access current stage and unlocked stages
int currentStage = researchData.getCurrentStage();
List<String> unlockedStages = researchData.getUnlockedStages();

// Unlock a stage and save
researchData.unlockStage(stageNumber);
// reset progress
researchData.resetProgress();
```

## Error Handling
Always provide clear feedback to developers and log errors:
```java
try {
    // Perform operation
} catch (Exception e) {
    player.sendMessage("Â§cError: " + e.getMessage());
    // Log error for server admin
    plugin.getLogger().severe("Developer API error: " + e.getMessage());
}
```

## See Also

*   [User Guide](../docs/USER_GUIDE.md)
*   [Research Configuration Guide](../docs/RESEARCH_CONFIGURATION.md)
*   [Team System Documentation](../docs/TEAM_SYSTEM.md)

---
*Generated by TechWars Plugin Documentation Assistant.*